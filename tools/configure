#!/bin/bash

# Version of LLVM/Clang to download and install.
LLVM_VERSION=10

# Install the dependencies for compiling, debugging, and running.
apt-get -y --no-install-recommends install \
    doxygen                                \
    gdb                                    \
    git                                    \
    gnupg2                                 \
    graphviz                               \
    grub-common                            \
    grub-pc-bin                            \
    less                                   \
    lsb-release                            \
    meson                                  \
    nasm                                   \
    python3                                \
    python3-pip                            \
    qemu-system                            \
    software-properties-common             \
    xorriso

# Download and install the latest version of LLVM/Clang and associated tools.
wget https://apt.llvm.org/llvm.sh
chmod +x llvm.sh
./llvm.sh $LLVM_VERSION

# Symlink the current version of LLVM/Clang to versionless names.
ln -s /usr/bin/clang-$LLVM_VERSION /usr/bin/clang
ln -s /usr/bin/clang++-$LLVM_VERSION /usr/bin/clang++
ln -s /usr/bin/ld.lld-$LLVM_VERSION /usr/bin/ld.lld
